<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.4.0 -->
<title>[六省联考2017]相逢是问候 | Panda_2134’s Blog</title>
<meta name="generator" content="Jekyll v3.6.2" />
<meta property="og:title" content="[六省联考2017]相逢是问候" />
<meta name="author" content="panda_2134" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="day1 没上200……不应该啊……正常点的话215应该没问题？ 题意 给定一个长为 的序列，要求支持 2 个操作： 把某个区间每个元素 换成 ，其中 是给定常数。 求区间和 思路 PoPoQQQ大爷：这……这不是……上帝和集合的正确用法吗？ 然而我做过上帝和集合的正确用法，却没能做出来这题 &gt;.&lt; 有扩展欧拉定理： 根据上帝和集合的正确用法，这个可以递归下去求，由于 每次至少折半，复杂度是 级别的。 考试的时候，总是在想：在线段树上面记录什么信息，能够一次执行一个区间的递归求值操作呢？如果只记录加了多少次的话，每次求和就得暴力查，这样复杂度就是每次操作 的了……最后也没想出来，交的暴力，发现线性筛求 被卡了QAQ 实际上，为什么不换个角度思考呢？与其说一次执行一个区间的递归求值，还不如每次暴力改，在 次之后，那个位置原来的值是什么已经无关紧要了，因为递归下去出现了 ，最后求出的值一定相同！于是就不用再修改了= = 我们来冷静分析一下复杂度。修改的话区间内每个元素暴力，所有元素最多改 次，考虑序列所有元素，最坏复杂度是 （每次迭代+快速幂是 的），再算上每次在线段树上面分解区间的 ，总修改复杂度是 的，均摊到每次修改是 的。每次暴力改的时候维护下区间和，总查询复杂度是 的。 哲♂学分析一下，发现复杂度出现了 这种东西，运用根号平衡的思想，也应该想到提高前一半复杂度，降低后一半复杂度？ 其实这个思想和维护“区间开方-区间求和”也是类似的…… 代码 好像还有一种把快速幂的 去掉的方法？" />
<meta property="og:description" content="day1 没上200……不应该啊……正常点的话215应该没问题？ 题意 给定一个长为 的序列，要求支持 2 个操作： 把某个区间每个元素 换成 ，其中 是给定常数。 求区间和 思路 PoPoQQQ大爷：这……这不是……上帝和集合的正确用法吗？ 然而我做过上帝和集合的正确用法，却没能做出来这题 &gt;.&lt; 有扩展欧拉定理： 根据上帝和集合的正确用法，这个可以递归下去求，由于 每次至少折半，复杂度是 级别的。 考试的时候，总是在想：在线段树上面记录什么信息，能够一次执行一个区间的递归求值操作呢？如果只记录加了多少次的话，每次求和就得暴力查，这样复杂度就是每次操作 的了……最后也没想出来，交的暴力，发现线性筛求 被卡了QAQ 实际上，为什么不换个角度思考呢？与其说一次执行一个区间的递归求值，还不如每次暴力改，在 次之后，那个位置原来的值是什么已经无关紧要了，因为递归下去出现了 ，最后求出的值一定相同！于是就不用再修改了= = 我们来冷静分析一下复杂度。修改的话区间内每个元素暴力，所有元素最多改 次，考虑序列所有元素，最坏复杂度是 （每次迭代+快速幂是 的），再算上每次在线段树上面分解区间的 ，总修改复杂度是 的，均摊到每次修改是 的。每次暴力改的时候维护下区间和，总查询复杂度是 的。 哲♂学分析一下，发现复杂度出现了 这种东西，运用根号平衡的思想，也应该想到提高前一半复杂度，降低后一半复杂度？ 其实这个思想和维护“区间开方-区间求和”也是类似的…… 代码 好像还有一种把快速幂的 去掉的方法？" />
<link rel="canonical" href="http://localhost:4000/2018/03/14/greeting" />
<meta property="og:url" content="http://localhost:4000/2018/03/14/greeting" />
<meta property="og:site_name" content="Panda_2134’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-03-14T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"day1 没上200……不应该啊……正常点的话215应该没问题？ 题意 给定一个长为 的序列，要求支持 2 个操作： 把某个区间每个元素 换成 ，其中 是给定常数。 求区间和 思路 PoPoQQQ大爷：这……这不是……上帝和集合的正确用法吗？ 然而我做过上帝和集合的正确用法，却没能做出来这题 &gt;.&lt; 有扩展欧拉定理： 根据上帝和集合的正确用法，这个可以递归下去求，由于 每次至少折半，复杂度是 级别的。 考试的时候，总是在想：在线段树上面记录什么信息，能够一次执行一个区间的递归求值操作呢？如果只记录加了多少次的话，每次求和就得暴力查，这样复杂度就是每次操作 的了……最后也没想出来，交的暴力，发现线性筛求 被卡了QAQ 实际上，为什么不换个角度思考呢？与其说一次执行一个区间的递归求值，还不如每次暴力改，在 次之后，那个位置原来的值是什么已经无关紧要了，因为递归下去出现了 ，最后求出的值一定相同！于是就不用再修改了= = 我们来冷静分析一下复杂度。修改的话区间内每个元素暴力，所有元素最多改 次，考虑序列所有元素，最坏复杂度是 （每次迭代+快速幂是 的），再算上每次在线段树上面分解区间的 ，总修改复杂度是 的，均摊到每次修改是 的。每次暴力改的时候维护下区间和，总查询复杂度是 的。 哲♂学分析一下，发现复杂度出现了 这种东西，运用根号平衡的思想，也应该想到提高前一半复杂度，降低后一半复杂度？ 其实这个思想和维护“区间开方-区间求和”也是类似的…… 代码 好像还有一种把快速幂的 去掉的方法？","author":{"@type":"Person","name":"panda_2134"},"@type":"BlogPosting","url":"http://localhost:4000/2018/03/14/greeting","headline":"[六省联考2017]相逢是问候","dateModified":"2018-03-14T00:00:00+08:00","datePublished":"2018-03-14T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2018/03/14/greeting"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="description" content="Stay Hungry,Stay Stupid"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/assets/css/style.css?v=ca581cfac24950b4053aaad38e9a666f577b9d12">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Panda_2134's Blog</h1>
      <h2 class="project-tagline">Stay Hungry,Stay Stupid</h2>
      
        <a href="http://github.com/panda2134/panda2134.github.io" class="btn">View on GitHub</a>
      
      
    </section>

    <section class="main-content">
      <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
  	jax: ["input/TeX", "output/HTML-CSS"],
    "HTML-CSS": { webFont: "Neo-Euler" }
  });
</script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<style>
	@font-face{
		font-family:"PTsans";
		src:url("/assets/font/PTsans.ttf");
		font-size: 20px;
	}
	@font-face{
		font-family:"SourceCodePro";
		src:url("/assets/font/SourceCodePro-Regular.ttf");
		font-size: 20px;
	}
	div.postpg {
		font-family:'PTsans','Microsoft Yahei Light','Microsoft Yahei','simsun',sans-serif;
		width: 750px;
		margin-left: 5rem;
		margin-right: 4rem;
		font-size: 20px;
	}
	.code{
		font-family:'SourceCodePro' !important;
		font-size: 20px !important;
	}
	code{
		font-family:'SourceCodePro' !important;
		font-size: 20px !important;
	}
</style>


<div class="postpg">
<p>
	<a href="/"> << Back to Index </a>
</p>

<h2>[六省联考2017]相逢是问候</h2>
<div id="post">
	<span style="color:#159957">In Categories:</span>
	
    	<span>数论, 扩展欧拉定理,  线段树</span>
    

    <br/>
    <span style="color:#159957">In Tags:</span>
    
		<span>None</span>
    
	<p>
    	<p>day1 没上200……不应该啊……正常点的话215应该没问题？</p>

<h2 id="题意">题意</h2>

<p>给定一个长为 <script type="math/tex">n (n \le 10^5)</script> 的序列，要求支持 2 个操作：</p>

<ol>
  <li>把某个区间每个元素 <script type="math/tex">a_i</script> 换成 <script type="math/tex">c^{a_i}</script> ，其中 <script type="math/tex">c</script> 是给定常数。</li>
  <li>求区间和</li>
</ol>

<h2 id="思路">思路</h2>

<p>PoPoQQQ大爷：这……这不是……上帝和集合的正确用法吗？</p>

<p>然而我做过上帝和集合的正确用法，却没能做出来这题 &gt;.&lt;</p>

<p>有扩展欧拉定理：
<script type="math/tex">a^b \equiv a^{b \text{ mod }\varphi(n) + [b \ge \varphi(n)]\cdot\varphi(n)} (\text{mod }n)</script>
根据上帝和集合的正确用法，这个可以递归下去求，由于 <script type="math/tex">\varphi(n)</script> 每次至少折半，复杂度是 <script type="math/tex">O(\lg n)</script> 级别的。</p>

<p>考试的时候，总是在想：在线段树上面记录什么信息，能够一次执行一个区间的递归求值操作呢？如果只记录加了多少次的话，每次求和就得暴力查，这样复杂度就是每次操作 <script type="math/tex">O(\lg n) - O(n\lg n)</script> 的了……最后也没想出来，交的暴力，发现线性筛求 <script type="math/tex">\varphi(n)</script> 被卡了QAQ</p>

<p>实际上，为什么不换个角度思考呢？与其说一次执行一个区间的递归求值，还不如每次暴力改，在 <script type="math/tex">O(\lg n)</script> 次之后，那个位置原来的值是什么已经无关紧要了，因为递归下去出现了 <script type="math/tex">\text{mod } 1</script> ，最后求出的值一定相同！于是就不用再修改了= =</p>

<p>我们来冷静分析一下复杂度。修改的话区间内每个元素暴力，所有元素最多改 <script type="math/tex">O(\lg n)</script> 次，考虑序列所有元素，最坏复杂度是 <script type="math/tex">O(n \lg^3 n)</script> （每次迭代+快速幂是 <script type="math/tex">O(\lg^2 n)</script> 的），再算上每次在线段树上面分解区间的 <script type="math/tex">O(\lg n)</script> ，总修改复杂度是 <script type="math/tex">O(n \lg^3 n + q_0 n) = O(n \lg^3 n)</script> 的，均摊到每次修改是 <script type="math/tex">O(\lg^3n)</script> 的。每次暴力改的时候维护下区间和，总查询复杂度是 <script type="math/tex">O(q_1 \lg n)</script> 的。</p>

<p>哲♂学分析一下，发现复杂度出现了 <script type="math/tex">O(\lg n) - O(n\lg n)</script> 这种东西，运用根号平衡的思想，也应该想到提高前一半复杂度，降低后一半复杂度？</p>

<p>其实这个思想和维护“区间开方-区间求和”也是类似的……</p>

<h2 id="代码">代码</h2>

<p>好像还有一种把快速幂的 <script type="math/tex">O(\lg n)</script> 去掉的方法？</p>


	</p>
</div>
<div id="related">
    <h3>Related Posts:</h3>
    <ul class="posts" style="margin:0px; padding:0px;">
        
    		<li><a href="/2018/03/17/ISAP">ISAP算法学习笔记</a></li>
  	  	
    		<li><a href="/2018/03/15/walk">[HNOI2013]游走</a></li>
  	  	
    		<li><a href="/2018/03/13/wish">[六省联考2017]分手是祝愿</a></li>
  	  	
    </ul>
</div>
<div id="comment">
     
	<h3>Comments:</h3>
<div id="comm1"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
var gitment = new Gitment({
  id: '/2018/03/14/greeting',
  owner: 'panda2134',
  repo: 'panda2134.github.io',
  oauth: {
    client_id: '9107291a3086ed30c48f',
    client_secret: 'aaa7ae9353eca07778c747e5641ffa81c5c24e8d',
  },
});
gitment.render('comm1');
</script>
	<noscript>Please enable JavaScript to view the comments.</noscript>
	
</div>
</div>


      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="http://github.com/panda2134/panda2134.github.io">panda2134.github.io</a> is maintained by <a href="http://github.com/panda2134">panda2134</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </section>

    
  </body>
</html>
